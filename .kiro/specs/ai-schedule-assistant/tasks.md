# AI Schedule Assistant - タスク管理

## 🔴 重要: 各タスク完了時の必須GitHub操作

**毎回のワークフロー:**
1. 🔴 **必須** タスクのチェックボックスを [ ] → [x] に更新
2. 📝 コミット作成: `git add . && git commit -m "[指定されたコミット名]"`
3. 🚀 プッシュ実行: `git push origin [branch-name]`
4. 🌿 次タスク用ブランチ作成: `git checkout -b feature/[次のタスク名]`

**🚨 重要:** 毎回必ずこのタスクファイル(.kiro/specs/ai-schedule-assistant/tasks.md)のチェックボックスを更新すること！

---

## 📋 実装計画

- [ ] 1. プロジェクト基盤とコア機能の実装
  - Next.js 14プロジェクトのセットアップとSupabase統合
  - 基本的なプロジェクト構造とTypeScript設定を構築
  - _要件: 要件1, 要件8_

- [x] 1.1 Next.js プロジェクトセットアップ
  - Next.js 14 (App Router)プロジェクトを作成
  - TypeScript、ESLint、Tailwind CSSの設定
  - 基本的なフォルダ構造（app, components, lib, types）を構築
  - _要件: 要件8.1, 要件8.3_
  - **コミット名**: `feat: Next.js 14プロジェクト初期セットアップ`
  - **ブランチ名**: `feature/nextjs-setup`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [x] 1.2 Supabase統合とデータベース設計
  - Supabaseプロジェクトの作成と接続設定
  - データベーススキーマ（users, events, tasks, notifications, analytics_logs）を実装
  - 基本的なuser_idフィルタリングを実装（RLSは後のフェーズで実装）
  - _要件: 要件6.4, 要件6.5_
  - **コミット名**: `feat: Supabase統合とデータベース設計`
  - **ブランチ名**: `feature/supabase-integration`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [x] 1.3 認証システムの基本実装
  - 開発環境用の簡易認証システムを実装
  - Google OAuth2の基本設定（テストモード）
  - AuthProviderとAuthGuardコンポーネントを作成
  - _要件: 要件6.1, 要件6.2_
  - **コミット名**: `feat: 認証システムの基本実装`
  - **ブランチ名**: `feature/auth-system`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 2. Google Calendar統合機能の実装
  - Google Calendar APIとの双方向同期機能を実装
  - OAuth2認証フローとイベントCRUD操作を構築
  - _要件: 要件1_

- [x] 2.1 Google Calendar API統合
  - Google Cloud Consoleでプロジェクト設定とAPI有効化
  - OAuth2 PKCEフローの実装（開発環境ではテストユーザーモード）
  - Google Calendar APIクライアントの作成
  - _要件: 要件1.1, 要件6.1_
  - **コミット名**: `feat: Google Calendar API統合実装`
  - **ブランチ名**: `feature/google-calendar-api`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [x] 2.2 カレンダーイベント同期機能
  - 当日のイベント取得機能を実装
  - 月間カレンダー表示用の月次イベント取得を実装
  - イベントの作成、更新、削除の双方向同期を実装
  - 5分間隔での自動同期機能を実装
  - _要件: 要件1.1, 要件1.2, 要件1.3, 要件1.4_
  - **コミット名**: `feat: カレンダーイベント同期機能実装`
  - **ブランチ名**: `feature/calendar-sync`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [x] 2.3 オフライン対応とエラーハンドリング
  - Google Calendar API利用不可時のキャッシュ機能を実装
  - 同期失敗時のキューイングシステムを実装
  - ユーザーフレンドリーなエラーメッセージを実装
  - _要件: 要件1.5, 要件10.4_
  - **コミット名**: `feat: オフライン対応とエラーハンドリング実装`
  - **ブランチ名**: `feature/offline-error-handling`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 3. AI駆動タスク提案システムの実装
  - OpenAI GPT-4oを使用したタスク提案機能を構築
  - 準備タスク自動生成と優先度付け機能を実装
  - _要件: 要件2, 要件3_

- [ ] 3.1 OpenAI API統合とプロンプト設計
  - OpenAI APIクライアントの実装
  - 3-shotプロンプトエンジニアリングの実装
  - JSON構造化出力（title, eta, priority）の実装
  - _要件: 要件3.1, 要件3.2, 要件9.2_
  - **コミット名**: `feat: OpenAI API統合とプロンプト設計`
  - **ブランチ名**: `feature/openai-integration`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 3.2 準備タスク自動生成機能
  - イベント詳細分析による準備タスク生成を実装
  - 所要時間見積もり機能を実装
  - 緊急度・重要度による優先順位付けを実装
  - _要件: 要件2.1, 要件2.2, 要件2.3, 要件2.4_
  - **コミット名**: `feat: 準備タスク自動生成機能実装`
  - **ブランチ名**: `feature/auto-task-generation`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 3.3 インテリジェントタスク提案機能
  - カレンダー空き時間分析機能を実装
  - アイゼンハワーマトリックス原則による優先度付けを実装
  - 30分未満時間枠での短時間タスク提案を実装
  - _要件: 要件3.1, 要件3.2, 要件3.5_
  - **コミット名**: `feat: インテリジェントタスク提案機能実装`
  - **ブランチ名**: `feature/intelligent-task-suggestions`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 3.4 AI提案フィードバックシステム
  - ユーザーフィードバック収集機能を実装
  - 提案採用率の追跡機能を実装
  - フィードバックに基づく学習データ記録を実装
  - _要件: 要件3.4, 要件9.1, 要件9.3_
  - **コミット名**: `feat: AI提案フィードバックシステム実装`
  - **ブランチ名**: `feature/ai-feedback-system`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 4. タスク管理システムの実装
  - タスクのCRUD操作と状態管理機能を構築
  - 完了統計とリスケジュール機能を実装
  - _要件: 要件2, 要件5_

- [ ] 4.1 タスクCRUD機能
  - タスクの作成、読み取り、更新、削除機能を実装
  - タスク状態管理（pending, in_progress, completed, cancelled）を実装
  - タスクフィルタリングと検索機能を実装
  - _要件: 要件2.5, 要件5.3_
  - **コミット名**: `feat: タスクCRUD機能実装`
  - **ブランチ名**: `feature/task-crud`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 4.2 タスク完了とリスケジュール機能
  - タスク完了マーキング機能を実装
  - 18:00自動完了サマリー生成を実装
  - 未完了タスクの翌日リスケジュール提案を実装
  - _要件: 要件5.1, 要件5.2_
  - **コミット名**: `feat: タスク完了とリスケジュール機能実装`
  - **ブランチ名**: `feature/task-completion-reschedule`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 4.3 タスク分析と改善提案
  - 継続延期タスクの検出とサブタスク分割提案を実装
  - 3回以上延期タスクのフラグ機能を実装
  - 完了率と生産性メトリクス表示を実装
  - _要件: 要件5.4, 要件5.5, 要件5.3_
  - **コミット名**: `feat: タスク分析と改善提案機能実装`
  - **ブランチ名**: `feature/task-analysis-improvement`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 5. 通知システムの実装
  - ブラウザ通知とDiscord通知機能を構築
  - タイムリーな通知とリマインダー機能を実装
  - _要件: 要件4_

- [ ] 5.1 Service Worker通知システム
  - Service Workerの設定と通知権限管理を実装
  - 15分前イベント/タスクリマインダーを実装
  - 高優先度タスクの2時間前緊急通知を実装
  - _要件: 要件4.1, 要件4.2_
  - **コミット名**: `feat: Service Worker通知システム実装`
  - **ブランチ名**: `feature/service-worker-notifications`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 5.2 Discord通知統合
  - Discord Webhook APIクライアントを実装
  - 通知メッセージのフォーマット機能を実装
  - Discord Embed形式での豊富な通知を実装
  - _要件: 要件4.1, 要件4.2_
  - **コミット名**: `feat: Discord通知統合実装`
  - **ブランチ名**: `feature/discord-notifications`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 5.3 通知設定と管理機能
  - 通知設定画面（Discord Webhook URL設定）を実装
  - 集中モード時の通知キューイング機能を実装
  - 通知履歴表示機能を実装
  - _要件: 要件4.5, 要件4.4_
  - **コミット名**: `feat: 通知設定と管理機能実装`
  - **ブランチ名**: `feature/notification-settings`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 6. ユーザーインターフェースの実装
  - レスポンシブなダッシュボードとタスク管理画面を構築
  - 直感的な操作性とアクセシビリティを確保
  - _要件: 要件8, 要件10_

- [ ] 6.1 メインダッシュボード
  - 4つのメトリクスカード（本日のタスク、完了済み、完了率、残り作業時間）を実装
  - 3カラムレイアウト（メイン：タスク+AI提案、サイド：カレンダーウィジェット）を実装
  - 右サイドバーの月間カレンダーウィジェット（今日ハイライト、前月/次月ナビ）を実装
  - 今日のスケジュールタイムライン（色分け時間ブロック、時間/タイトル/場所表示）を実装
  - AI提案カード（緑色背景、ロボットアイコン付き）を実装
  - AIチャット相談入力欄とチャット履歴表示を実装
  - リアルタイム同期ステータス表示を実装
  - _要件: 要件8.3, 要件10.2, 要件12, 要件1_
  - **コミット名**: `feat: メインダッシュボードUI実装`
  - **ブランチ名**: `feature/main-dashboard`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 6.2 タスク管理インターフェース
  - フィルターボタン（すべて、未完了、完了済み、高優先度、今日の期限）を実装
  - タスクアイテム（チェックボックス、タイトル、メタ情報、優先度バッジ）を実装
  - 延期タスクの特別表示（赤い左ボーダー、分割提案ボタン）を実装
  - モーダル形式のタスク作成・編集フォームを実装
  - タスク完了時の通知とメトリクス更新を実装
  - _要件: 要件4.3, 要件8.1, 要件5.4_
  - **コミット名**: `feat: タスク管理インターフェース実装`
  - **ブランチ名**: `feature/task-management-ui`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 6.3 カレンダーウィジェットコンポーネント
  - 月間カレンダーグリッド（7×6グリッド、曜日ヘッダー）を実装
  - 今日の日付ハイライト（青背景、白文字、太字）を実装
  - 前月/次月ナビゲーションボタンを実装
  - イベント有無の視覚的インジケーター（小さな点表示）を実装
  - スティッキーポジション（上部固定）とレスポンシブ対応を実装
  - _要件: 要件1, 要件8.3_
  - **コミット名**: `feat: カレンダーウィジェットコンポーネント実装`
  - **ブランチ名**: `feature/calendar-widget`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 6.4 スケジュールタイムライン機能
  - 今日のスケジュール縦型タイムライン表示を実装
  - 時間ブロックの色分け（会議：青、作業：緑、その他：ピンク）を実装
  - 時間、タイトル、場所の情報表示を実装
  - 空き時間の自動検出と表示を実装
  - スクロール可能な固定高さコンテナを実装
  - _要件: 要件1, 要件3.1_
  - **コミット名**: `feat: スケジュールタイムライン機能実装`
  - **ブランチ名**: `feature/schedule-timeline`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 6.5 レスポンシブUIコンポーネントシステム
  - sample.mdスタイルのカードコンポーネント（白背景、影付き）を実装
  - メトリクスカード（数値、ラベル、中央揃え）コンポーネントを実装
  - 優先度バッジ（高/中/低の色分け）コンポーネントを実装
  - モーダルコンポーネント（オーバーレイ、フォーム、アクションボタン）を実装
  - トグルスイッチとフィルターボタンコンポーネントを実装
  - _要件: 要件8.1, 要件8.3_
  - **コミット名**: `feat: レスポンシブUIコンポーネントシステム実装`
  - **ブランチ名**: `feature/responsive-ui-components`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 6.6 設定画面とエラーハンドリング
  - sample.mdスタイルの設定画面（セクション分け、トグル、選択肢）を実装
  - 分かりやすいエラーメッセージ表示を実装
  - 段階的な操作ガイダンスを実装
  - _要件: 要件10.1, 要件10.3, 要件10.5_
  - **コミット名**: `feat: 設定画面とエラーハンドリング実装`
  - **ブランチ名**: `feature/settings-error-handling`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 7. パフォーマンス最適化とテスト実装
  - アプリケーションのパフォーマンス最適化を実施
  - 包括的なテストスイートを構築
  - _要件: 要件8, 要件9_

- [ ] 7.1 パフォーマンス最適化
  - UI応答時間300ms以内の最適化を実施
  - AI処理のP95 2秒以内、P99 5秒以内の最適化を実施
  - データベースクエリの最適化とインデックス設定を実施
  - _要件: 要件8.1, 要件8.2_
  - **コミット名**: `feat: パフォーマンス最適化実装`
  - **ブランチ名**: `feature/performance-optimization`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 7.2 単体テストとE2Eテスト
  - 主要ビジネスロジックの単体テストを実装
  - Google Calendar同期のE2Eテストを実装
  - AI提案機能のテストを実装
  - _要件: 要件9.4_
  - **コミット名**: `test: 単体テストとE2Eテスト実装`
  - **ブランチ名**: `feature/unit-e2e-testing`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 7.3 エラー処理とフォールバック機能
  - AI推論失敗時のフォールバック提案を実装
  - 提案精度50%以下時の自動プロンプト調整を実装
  - システム全体の優雅な劣化機能を実装
  - _要件: 要件9.4, 要件9.5, 要件8.5_
  - **コミット名**: `feat: エラー処理とフォールバック機能実装`
  - **ブランチ名**: `feature/error-handling-fallback`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 8. コスト管理とモニタリング機能の実装
  - OpenAI API使用量の監視と制限機能を構築
  - システム稼働状況の監視機能を実装
  - _要件: 要件7_

- [ ] 8.1 コスト監視システム
  - OpenAI API月間50万トークン制限の実装
  - 80%到達時のGPT-3.5自動切り替えを実装
  - 月額25ドル超過時のAI提案頻度削減を実装
  - _要件: 要件7.1, 要件7.2, 要件7.5_
  - **コミット名**: `feat: コスト監視システム実装`
  - **ブランチ名**: `feature/cost-monitoring`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 8.2 システム監視とアラート
  - データベース使用量監視とアラートを実装
  - 99.5%アップタイム監視を実装
  - パフォーマンス劣化時の自動スケーリングを実装
  - _要件: 要件7.3, 要件8.4, 要件8.5_
  - **コミット名**: `ops: システム監視とアラート実装`
  - **ブランチ名**: `feature/system-monitoring`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 9. メンター機能の実装
  - AI駆動の生産性分析とメンタリング機能を構築
  - 現状分析と改善提案システムを実装
  - _要件: 要件12_

- [ ] 9.1 生産性分析システム
  - タスク完了率80%を3日連続下回り検出を実装
  - 未完了タスク5個以上蓄積時の要因分析を実装
  - 見積もり時間と実際時間の差分分析を実装
  - _要件: 要件12.1, 要件12.2, 要件12.3_
  - **コミット名**: `feat: 生産性分析システム実装`
  - **ブランチ名**: `feature/productivity-analysis`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 9.2 AIチャット相談システム
  - ダッシュボード下部にAIチャット入力欄（sample.mdスタイル）を実装
  - チャットメッセージの吹き出し表示（ユーザー/AI区別）を実装
  - 現在のタスク・予定・生産性データを考慮したコンテキスト付き回答を実装
  - チャット履歴の保存と過去の会話参照機能を実装
  - 「よくある質問」のクイックボタン機能を実装
  - _要件: 要件12, 要件10.2_
  - **コミット名**: `feat: AIチャット相談システム実装`
  - **ブランチ名**: `feature/ai-chat-consultation`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 9.3 メンター提案システム
  - 完了率低下傾向時の具体的改善案提示を実装
  - 10時間超過作業や3回連続延期時の休憩提案を実装
  - 振り返りセッションボタンとガイダンスを実装
  - _要件: 要件12.4, 要件12.5, 要件12.1_
  - **コミット名**: `feat: メンター提案システム実装`
  - **ブランチ名**: `feature/mentor-suggestions`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 10. 高度なAI学習機能の実装
  - AI提案精度の継続的改善システムを構築
  - データ品質管理とモデル最適化を実装
  - _要件: 要件11_

- [ ] 10.1 フィードバック学習システム
  - 100件以上フィードバック蓄積時の月次プロンプト調整を実装
  - 提案採用率30日平均20%低下時のアラート機能を実装
  - 新プロジェクトタイプのキーワード学習を実装
  - _要件: 要件11.1, 要件11.2, 要件11.3_
  - **コミット名**: `feat: フィードバック学習システム実装`
  - **ブランチ名**: `feature/feedback-learning-system`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 10.2 データ品質管理
  - 異常データ（負の時間、未来の完了日）の自動除外を実装
  - 提案精度30%以下時のデフォルト汎用提案切り替えを実装
  - データ品質監視ダッシュボードを実装
  - _要件: 要件11.4, 要件11.5_
  - **コミット名**: `feat: データ品質管理機能実装`
  - **ブランチ名**: `feature/data-quality-management`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 11. セキュリティ強化とデプロイ準備
  - 本番環境向けのセキュリティ機能を実装
  - デプロイメントとCI/CDパイプラインを構築
  - _要件: 要件6_

- [ ] 11.1 本番認証システム
  - 完全なGoogle OAuth2 PKCE認証を実装
  - APIトークンの暗号化ストレージを実装
  - セッション管理とトークン自動更新を実装
  - _要件: 要件6.1, 要件6.3_
  - **コミット名**: `feat: 本番認証システム実装`
  - **ブランチ名**: `feature/production-auth`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 11.2 Row Level Security (RLS) 実装
  - 全テーブルのRLSポリシーを実装
  - ユーザーデータアクセス制御を強化
  - セキュリティテストを実施
  - _要件: 要件6.4, 要件6.5_
  - **コミット名**: `feat: Row Level Security (RLS) 実装`
  - **ブランチ名**: `feature/row-level-security`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

- [ ] 11.3 デプロイメントとCI/CD
  - Vercelデプロイメント設定を実装
  - 環境変数とシークレット管理を設定
  - 自動テストとデプロイパイプラインを構築
  - _要件: 要件8.4_
  - **コミット名**: `deploy: デプロイメントとCI/CDパイプライン構築`
  - **ブランチ名**: `feature/deployment-cicd`
  - **GitHub操作**: ✅コミット → ✅プッシュ → ✅新ブランチ作成

---

## 🔄 GitHub操作チェックリスト（毎回確認）

### 作業開始時
- [ ] 現在のブランチ確認: `git branch`
- [ ] 最新状態に更新: `git pull origin main`
- [ ] 新しいfeatureブランチ作成: `git checkout -b feature/[タスク名]`

### 作業完了時
- [ ] 変更内容確認: `git status`
- [ ] ファイル追加: `git add .`
- [ ] コミット作成: `git commit -m "[上記のコミット名を使用]"`
- [ ] プッシュ実行: `git push origin [current-branch]`
- [ ] タスクファイル更新: [ ] → [x]

### マイルストーン完了時
- [ ] プルリクエスト作成: `gh pr create`
- [ ] コードレビュー実施
- [ ] mainブランチへマージ
- [ ] 不要ブランチ削除: `git branch -d [branch-name]`

---

## 📝 コミットメッセージ規則

- **feat:** 新機能追加
- **fix:** バグ修正
- **test:** テスト追加・修正
- **docs:** ドキュメント更新
- **style:** コードスタイル修正
- **refactor:** リファクタリング
- **deploy:** デプロイ関連
- **ops:** 運用・監視関連

**例:** `feat: AIスケジュール最適化機能の基本実装`

---

## ⚠️ 重要注意事項

1. **毎回必ずGitHub操作を実行する**
2. **タスク完了時は必ずチェックボックスを更新する**
3. **コミット名は各タスクに指定された名称を使用する**
4. **プッシュを忘れると進捗が追跡できない**
5. **次のタスク開始前に新しいブランチを作成する**